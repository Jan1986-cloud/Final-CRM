"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[56],{4056:(e,t,s)=>{s.d(t,{ClientForm:()=>y});var r=s(5155),a=s(2177),l=s(221),n=s(5594),d=s(285),i=s(7759),o=s(2523),c=s(9409),m=s(8539),u=s(7481),x=s(5695),p=s(2115),f=s(4477);let h=(0,f.createServerReference)("40b1d474d95f100735497546519a62008f54dc2245",f.callServer,void 0,f.findSourceMapURL,"saveClientAction");var j=s(172);let b=n.Ik({name:n.Yj().min(2,"Name must be at least 2 characters."),email:n.Yj().email("Invalid email address."),phone:n.Yj().min(10,"Phone number is too short."),address:n.Ik({street:n.Yj().min(2,"Street is required."),city:n.Yj().min(2,"City is required."),state:n.Yj().min(2,"State is required."),zip:n.Yj().min(5,"Zip code is required.")}),status:n.k5(["Lead","Active","Inactive"]),notes:n.Yj().optional()});function y(e){let{client:t,onFinished:s}=e,{toast:n}=(0,u.dj)(),f=(0,x.useRouter)(),[y,v]=(0,p.useTransition)(),g=(0,a.mN)({resolver:(0,l.u)(b),defaultValues:t||{name:"",email:"",phone:"",address:{street:"",city:"",state:"",zip:""},status:"Lead",notes:""}});return(0,r.jsx)(i.lV,{...g,children:(0,r.jsxs)("form",{onSubmit:g.handleSubmit(function(e){v(async()=>{try{let r=t?{...e,id:t.id}:e,a=await h(r);n({title:t?"Client Updated":"Client Created",description:'Client "'.concat(a.name,'" has been successfully saved.')}),null==s||s(a),f.refresh()}catch(e){console.error(e),n({variant:"destructive",title:"Error",description:e.message||"Failed to save client. Please try again."})}})}),className:"space-y-6",children:[(0,r.jsx)(i.zB,{control:g.control,name:"name",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Full Name"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(o.p,{placeholder:"John Doe",...t,disabled:y})}),(0,r.jsx)(i.C5,{})]})}}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsx)(i.zB,{control:g.control,name:"email",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Email"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(o.p,{placeholder:"john.doe@example.com",...t,disabled:y})}),(0,r.jsx)(i.C5,{})]})}}),(0,r.jsx)(i.zB,{control:g.control,name:"phone",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Phone"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(o.p,{placeholder:"(555) 123-4567",...t,disabled:y})}),(0,r.jsx)(i.C5,{})]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsx)(i.zB,{control:g.control,name:"address.street",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Street Address"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(o.p,{placeholder:"123 Main St",...t,disabled:y})}),(0,r.jsx)(i.C5,{})]})}}),(0,r.jsx)(i.zB,{control:g.control,name:"address.city",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"City"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(o.p,{placeholder:"Anytown",...t,disabled:y})}),(0,r.jsx)(i.C5,{})]})}})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsx)(i.zB,{control:g.control,name:"address.state",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"State / Province"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(o.p,{placeholder:"CA",...t,disabled:y})}),(0,r.jsx)(i.C5,{})]})}}),(0,r.jsx)(i.zB,{control:g.control,name:"address.zip",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Zip / Postal Code"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(o.p,{placeholder:"12345",...t,disabled:y})}),(0,r.jsx)(i.C5,{})]})}})]}),(0,r.jsx)(i.zB,{control:g.control,name:"status",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Status"}),(0,r.jsxs)(c.l6,{onValueChange:t.onChange,defaultValue:t.value,disabled:y,children:[(0,r.jsx)(i.MJ,{children:(0,r.jsx)(c.bq,{children:(0,r.jsx)(c.yv,{placeholder:"Select client status"})})}),(0,r.jsxs)(c.gC,{children:[(0,r.jsx)(c.eb,{value:"Lead",children:"Lead"}),(0,r.jsx)(c.eb,{value:"Active",children:"Active"}),(0,r.jsx)(c.eb,{value:"Inactive",children:"Inactive"})]})]}),(0,r.jsx)(i.C5,{})]})}}),(0,r.jsx)(i.zB,{control:g.control,name:"notes",render:e=>{let{field:t}=e;return(0,r.jsxs)(i.eI,{children:[(0,r.jsx)(i.lR,{children:"Notes"}),(0,r.jsx)(i.MJ,{children:(0,r.jsx)(m.T,{placeholder:"Initial meeting details, client requirements, etc.",className:"resize-none",...t,disabled:y})}),(0,r.jsx)(i.Rr,{children:"Any relevant notes about this client."}),(0,r.jsx)(i.C5,{})]})}}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)(d.$,{type:"submit",disabled:y,children:[y&&(0,r.jsx)(j.A,{className:"animate-spin"}),t?"Save Changes":"Create Client"]})})]})})}},5057:(e,t,s)=>{s.d(t,{J:()=>o});var r=s(5155),a=s(2115),l=s(968),n=s(2085),d=s(9434);let i=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.b,{ref:t,className:(0,d.cn)(i(),s),...a})});o.displayName=l.b.displayName},7481:(e,t,s)=>{s.d(t,{dj:()=>u});var r=s(2115);let a=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],o={toasts:[]};function c(e){o=d(o,e),i.forEach(e=>{e(o)})}function m(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=r.useState(o);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7759:(e,t,s)=>{s.d(t,{C5:()=>b,MJ:()=>h,Rr:()=>j,eI:()=>p,lR:()=>f,lV:()=>o,zB:()=>m});var r=s(5155),a=s(2115),l=s(4253),n=s(2177),d=s(9434),i=s(5057);let o=n.Op,c=a.createContext({}),m=e=>{let{...t}=e;return(0,r.jsx)(c.Provider,{value:{name:t.name},children:(0,r.jsx)(n.xI,{...t})})},u=()=>{let e=a.useContext(c),t=a.useContext(x),{getFieldState:s,formState:r}=(0,n.xW)(),l=s(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=t;return{id:d,name:e.name,formItemId:"".concat(d,"-form-item"),formDescriptionId:"".concat(d,"-form-item-description"),formMessageId:"".concat(d,"-form-item-message"),...l}},x=a.createContext({}),p=a.forwardRef((e,t)=>{let{className:s,...l}=e,n=a.useId();return(0,r.jsx)(x.Provider,{value:{id:n},children:(0,r.jsx)("div",{ref:t,className:(0,d.cn)("space-y-2",s),...l})})});p.displayName="FormItem";let f=a.forwardRef((e,t)=>{let{className:s,...a}=e,{error:l,formItemId:n}=u();return(0,r.jsx)(i.J,{ref:t,className:(0,d.cn)(l&&"text-destructive",s),htmlFor:n,...a})});f.displayName="FormLabel";let h=a.forwardRef((e,t)=>{let{...s}=e,{error:a,formItemId:n,formDescriptionId:d,formMessageId:i}=u();return(0,r.jsx)(l.DX,{ref:t,id:n,"aria-describedby":a?"".concat(d," ").concat(i):"".concat(d),"aria-invalid":!!a,...s})});h.displayName="FormControl";let j=a.forwardRef((e,t)=>{let{className:s,...a}=e,{formDescriptionId:l}=u();return(0,r.jsx)("p",{ref:t,id:l,className:(0,d.cn)("text-sm text-muted-foreground",s),...a})});j.displayName="FormDescription";let b=a.forwardRef((e,t)=>{var s;let{className:a,children:l,...n}=e,{error:i,formMessageId:o}=u(),c=i?String(null!=(s=null==i?void 0:i.message)?s:""):l;return c?(0,r.jsx)("p",{ref:t,id:o,className:(0,d.cn)("text-sm font-medium text-destructive",a),...n,children:c}):null});b.displayName="FormMessage"},8539:(e,t,s)=>{s.d(t,{T:()=>n});var r=s(5155),a=s(2115),l=s(9434);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...a})});n.displayName="Textarea"},9409:(e,t,s)=>{s.d(t,{bq:()=>u,eb:()=>h,gC:()=>f,l6:()=>c,yv:()=>m});var r=s(5155),a=s(2115),l=s(4011),n=s(9556),d=s(7381),i=s(518),o=s(9434);let c=l.bL;l.YJ;let m=l.WT,u=a.forwardRef((e,t)=>{let{className:s,children:a,...d}=e;return(0,r.jsxs)(l.l9,{ref:t,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...d,children:[a,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=l.l9.displayName;let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.PP,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})});x.displayName=l.PP.displayName;let p=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.wn,{ref:t,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...a,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let f=a.forwardRef((e,t)=>{let{className:s,children:a,position:n="popper",...d}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:t,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...d,children:[(0,r.jsx)(x,{}),(0,r.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(p,{})]})})});f.displayName=l.UC.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.JU,{ref:t,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...a})}).displayName=l.JU.displayName;let h=a.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(l.q7,{ref:t,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:a})]})});h.displayName=l.q7.displayName,a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(l.wv,{ref:t,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=l.wv.displayName}}]);